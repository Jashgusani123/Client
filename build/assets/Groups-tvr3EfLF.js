const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ConfirmDeleteDialog-CmA6Z8gT.js","assets/index-MwKyM0NC.js","assets/DialogTitle-_ylyH_JZ.js","assets/index-qMaLzmVy.js","assets/Typography-DTs5yARX.js","assets/Button-6yo8lf6q.js","assets/AddMemberDialog-DAGS2j6S.js","assets/SempleChats-s9j4Tkaa.js","assets/UserItem-BPBBCb8H.js","assets/ListItem-Ca6OtDt8.js","assets/Menu-Dg8ucpFe.js","assets/isMuiElement-BpQ4W8_l.js","assets/Avatar-DQRrgh-w.js","assets/hook-DI4cddH2.js"])))=>i.map(i=>d[i]);
import{r as t,_,u as J,a as X,b as Z,c as ee,d as re,e as se,j as e,L as te,G as x,m as G,S as m,f as ae,h as oe,i as ie,k as ne,s as me}from"./index-MwKyM0NC.js";import{Menu as de,KeyboardBackspace as le,Done as ce,Edit as pe,Delete as ue,Add as xe}from"@mui/icons-material";import{A as he}from"./AvatarCard-BHi37mpw.js";import{U as ge}from"./UserItem-BPBBCb8H.js";import{u as h,a as fe,D as je,B as be,T as y}from"./hook-DI4cddH2.js";import{T as l}from"./Typography-DTs5yARX.js";import{C as ve}from"./CircularProgress-BZQYRtWr.js";import{B as S,I as d}from"./index-qMaLzmVy.js";import{T as we}from"./TextField-GNfoWh2K.js";import{B as E}from"./Button-6yo8lf6q.js";import"./Menu-Dg8ucpFe.js";import"./Avatar-DQRrgh-w.js";import"./ListItem-Ca6OtDt8.js";import"./isMuiElement-BpQ4W8_l.js";const Me=t.lazy(()=>_(()=>import("./ConfirmDeleteDialog-CmA6Z8gT.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ce=t.lazy(()=>_(()=>import("./AddMemberDialog-DAGS2j6S.js"),__vite__mapDeps([6,1,7,8,9,10,3,11,12,4,13,2,5]))),Oe=()=>{var k;const n=J(),i=X(),r=Z()[0].get("group"),s=ee(""),a=re({chatId:r,populate:!0},{skip:!r}),[c,g]=h(oe),[B,L]=h(ie),[A,ke]=h(ne),{isAddMember:N}=se(o=>o.misc),[T,f]=t.useState(!1),[j,b]=t.useState(),[v,p]=t.useState(""),[w,M]=t.useState(!1),[z,C]=t.useState([]),[R,u]=t.useState(!1),F=[{isError:s.isError,error:s.isError},{isError:a.isError,error:a.isError}];fe(F),t.useEffect(()=>(a.data&&(b(a.data.chat.name),p(a.data.chat.name),C(a.data.chat.members)),()=>{b(""),p(""),C([]),u(!1)}),[a.data]);const O=o=>{B("Removing Member...",{chatId:r,userId:o})},H=()=>{i("/")},P=()=>{f(o=>!o)},U=()=>{f(!1)},V=()=>{u(!1),c("Updating Group Name...",{chatId:r,name:v})},W=()=>{M(!0)},D=()=>{M(!1)},Q=()=>{n(me(!0))},K=()=>{A("Deleting Group... ",r),D(),i("/groups")},Y=e.jsxs(e.Fragment,{children:[e.jsx(be,{sx:{display:{xs:"block",sm:"none",position:"fixed",top:"2rem",right:"1rem",left:"auto"}},children:e.jsx(y,{title:"Groups",children:e.jsx(d,{onClick:P,children:e.jsx(de,{})})})}),e.jsx(y,{title:"Back",children:e.jsx(d,{sx:{position:"absolute",top:"2rem",left:"2rem",bgcolor:G,color:"white","&:hover":{bgcolor:"rgba(0,0,0,0.2)",color:"black"}},onClick:H,children:e.jsx(le,{})})})]}),$=e.jsx(m,{direction:"row",alignItems:"center",justifyContent:"center",spacing:"1rem",padding:"2.3rem",marginLeft:"2rem",sx:{"@media (min-width: 412px) and (max-width: 716px)":{marginTop:"5rem",width:"24rem"},"@media (min-width: 360px) and (max-width: 412px)":{marginTop:"2rem",width:"15rem"},"@media (min-width: 344px) and (max-width: 360px)":{marginTop:"2rem",width:"15rem"}},children:R?e.jsxs(e.Fragment,{children:[e.jsx(we,{value:v,onChange:o=>{p(o.target.value)}}),e.jsx(d,{onClick:V,disabled:g,children:e.jsx(ce,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{sx:{fontSize:"3rem","@media (min-width: 412px) and (max-width: 716px)":{fontSize:"2rem"},"@media (min-width: 360px) and (max-width: 412px)":{fontSize:" 0.9rem",fontWeight:"bold",fontFamily:"sans-serif"}},children:j}),e.jsx(d,{disabled:g,onClick:()=>u(!0),sx:{},children:e.jsx(pe,{})})]})}),q=e.jsxs(m,{direction:{sm:"row",xs:"column-reverse"},spacing:"1rem",p:{sm:"1rem",xs:"0",md:"1rem 4rem"},children:[e.jsx(E,{size:"large",variant:"outlined",startIcon:e.jsx(ue,{}),color:"error",onClick:W,children:"Delete Group"}),e.jsx(E,{size:"large",variant:"outlined",startIcon:e.jsx(xe,{}),color:"primary",onClick:Q,children:"Add Member"})]});return s.isLoading?e.jsx(te,{}):e.jsxs(x,{container:!0,height:"100vh",children:[e.jsx(x,{item:!0,sx:{display:{xs:"none",sm:"block"}},sm:4,bgcolor:G,children:e.jsx(I,{myGroups:(k=s==null?void 0:s.data)==null?void 0:k.groups,chatId:r})}),e.jsxs(x,{item:!0,xs:12,sm:8,sx:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",padding:"1rem 3rem","@media (min-width: 344px) and (max-width: 360px)":{padding:"3rem 1rem"}},children:[Y,j&&e.jsxs(e.Fragment,{children:[$,e.jsx(l,{margin:"2rem",alignSelf:"flex-start",variant:"body1",children:"Members"}),e.jsx(m,{maxWidth:"45rem",width:"100%",boxSizing:"border-box",padding:{sm:"1rem",xs:"0",md:"1rem 4rem"},spacing:"2rem",height:"50vh",overflow:"auto",children:L?e.jsx(ve,{}):z.map(o=>e.jsx(ge,{user:o,styling:{boxShadow:"0 0 0.5rem rgba(0,0,0,0.2)",padding:"1rem 2rem",borderRadius:"1rem"},handler:O},o._id))}),q]})]}),N&&e.jsx(t.Suspense,{fallback:e.jsx(S,{open:!0}),children:e.jsx(Ce,{chatId:r})}),w&&e.jsx(t.Suspense,{fallback:e.jsx(S,{open:!0}),children:e.jsx(Me,{open:w,handleClose:D,handleDelete:K})}),e.jsx(je,{sx:{display:{xs:"block",sm:"none"}},open:T,onClose:U,children:e.jsx(I,{w:"50vw",myGroups:s.data.groups,chatId:r})})]})},I=({w:n="100%",myGroups:i=[],chatId:r})=>e.jsx(m,{width:n,sx:{maxHeight:"100vh",overflowY:"auto"},children:i.length>0?i.map(s=>e.jsx(De,{group:s,chatId:r},s._id)):e.jsx(l,{textAlign:"center",padding:"1rem",children:"No Groups"})}),De=t.memo(({group:n,chatId:i})=>{const{name:r,avatar:s,_id:a}=n;return e.jsx(ae,{to:`?group=${a}`,onClick:c=>{i===a&&c.preventDefault()},children:e.jsxs(m,{direction:"row",alignItems:"center",padding:"1rem",gap:"1rem",children:[e.jsx(he,{avatara:s}),e.jsx(l,{fontWeight:600,fontFamily:"sans-serif",children:r})]})})});export{Oe as default};
