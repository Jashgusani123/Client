import{r as j,u as A,j as e,ag as F,S as B,ah as M,ai as o,a3 as W,a4 as P,aj as L}from"./index-MwKyM0NC.js";import{i as E,a as w,b as O,c as R,P as N,I as y}from"./index-qMaLzmVy.js";import{VisibilityOff as T,Visibility as D,CameraAlt as $}from"@mui/icons-material";import{C as z}from"./Container-DbWrj5Jw.js";import{T as s}from"./Typography-DTs5yARX.js";import{T as l}from"./TextField-GNfoWh2K.js";import{I as H}from"./InputAdornment-fZgdVyTW.js";import{B as h}from"./Button-6yo8lf6q.js";import{A as G}from"./Avatar-DQRrgh-w.js";import"./isMuiElement-BpQ4W8_l.js";import"./Menu-Dg8ucpFe.js";const J=x=>{if(!E(x))return{isValid:!1,errorMessage:"UserName Is Invalid"}},se=()=>{const[x,k]=j.useState(!0),[c,m]=j.useState(!1),b=()=>k(a=>!a),f=w(""),v=w(""),r=w("",J),n=O(),d=R(),C=A(),[p,U]=j.useState(!1),I=()=>U(a=>!a),S=a=>a.preventDefault(),V=async a=>{a.preventDefault();const u=o.loading("Logging In...");m(!0);const t={withCredentials:!0,headers:{"Content-Type":"application/json"}};try{const{data:i}=await W.post(`${P}/api/v1/user/login`,{username:r.value,password:n.value},t);C(L(i.user)),o.success(i.message,{id:u})}catch(i){o.error(i.response.data.message||"Something Went Wrong",{id:u})}finally{m(!1)}},q=async a=>{a.preventDefault();const u=o.loading("Signing Up...");m(!0);const t=new FormData;t.append("avatar",d.file),t.append("name",f.value),t.append("bio",v.value),t.append("username",r.value),t.append("password",n.value);const i={withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}};try{const{data:g}=await W.post(`${P}/api/v1/user/new`,t,i);C(L(g.user)),o.success(g.message,{id:u})}catch(g){o.error(g.response.data.message||"Something Went Wrong",{id:u})}finally{m(!1)}};return e.jsx("div",{style:{backgroundImage:F},children:e.jsx(z,{component:"main",maxWidth:"xs",sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(N,{elevation:3,sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center"},children:x?e.jsxs(e.Fragment,{children:[e.jsx(s,{variant:"h5",children:"Login"}),e.jsxs("form",{style:{width:"100%",marginTop:"1rem"},onSubmit:V,children:[e.jsx(l,{required:!0,fullWidth:!0,label:"Username",margin:"normal",variant:"outlined",value:r.value,onChange:r.changeHandler}),e.jsx(l,{required:!0,fullWidth:!0,label:"Password",type:p?"text":"password",margin:"normal",variant:"outlined",value:n.value,onChange:n.changeHandler,InputProps:{endAdornment:e.jsx(H,{position:"end",children:e.jsx(y,{"aria-label":"toggle password visibility",onClick:I,onMouseDown:S,edge:"end",children:p?e.jsx(T,{}):e.jsx(D,{})})})}}),e.jsx(h,{variant:"contained",fullWidth:!0,color:"primary",type:"submit",sx:{marginTop:"1rem"},disabled:c,children:"Login"}),e.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",margin:"1rem"},children:"OR"}),e.jsx(h,{disabled:c,fullWidth:!0,onClick:b,children:"Sign Up Instead"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(B,{position:"relative",width:"10rem",margin:"auto",alignItems:"center",children:[e.jsx(G,{sx:{width:"10rem",height:"10rem",objectFit:"contain"},src:d.preview}),d.error&&e.jsx(s,{m:"1rem auto",width:"fit-content",display:"block",color:"error",variant:"caption",children:d.error}),e.jsxs(y,{sx:{position:"absolute",bottom:0,right:0,color:"white",bgcolor:"rgba(0,0,0,0.5)"},component:"label",children:[e.jsx($,{}),e.jsx(M,{type:"file",onChange:d.changeHandler})]})]}),e.jsx(s,{variant:"h5",sx:{marginTop:"1rem"},children:"Sign Up"}),e.jsxs("form",{style:{width:"100%",marginTop:"1rem"},onSubmit:q,children:[e.jsx(l,{required:!0,fullWidth:!0,label:"Name",margin:"normal",variant:"outlined",value:f.value,onChange:f.changeHandler}),e.jsx(l,{required:!0,fullWidth:!0,label:"Bio",margin:"normal",variant:"outlined",value:v.value,onChange:v.changeHandler}),e.jsx(l,{required:!0,fullWidth:!0,label:"Username",margin:"normal",variant:"outlined",value:r.value,onChange:r.changeHandler}),r.error&&e.jsx(s,{color:"error",variant:"caption",children:r.error}),e.jsx(l,{required:!0,fullWidth:!0,label:"Password",type:p?"text":"password",margin:"normal",variant:"outlined",value:n.value,onChange:n.changeHandler,InputProps:{endAdornment:e.jsx(H,{position:"end",children:e.jsx(y,{"aria-label":"toggle password visibility",onClick:I,onMouseDown:S,edge:"end",children:p?e.jsx(T,{}):e.jsx(D,{})})})}}),n.error&&e.jsx(s,{color:"error",variant:"caption",children:n.error}),e.jsx(h,{variant:"contained",fullWidth:!0,color:"primary",type:"submit",sx:{marginTop:"1rem"},disabled:c,children:"Sign Up"}),e.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",margin:"1rem"},children:"OR"}),e.jsx(h,{disabled:c,fullWidth:!0,onClick:b,children:"Login Instead"})]})]})})})})};export{se as default};
