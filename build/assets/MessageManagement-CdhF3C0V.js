import{r as m,Y as n,q as i,j as e,A as h,v as l,S as c,a4 as p}from"./index-BmBvUYam.js";import{d as f}from"./index-DjVLi6pA.js";import{A as w}from"./Adminlayout-Hh78gLOe.js";import{A as u}from"./Attachments-B2d84hmj.js";import{T as g}from"./Table-Dxri5Kwr.js";import{a as N,B as x}from"./hook-BfoxiVHU.js";import{A}from"./Avatar-vsw6e8ON.js";import"@mui/icons-material";import"./Typography-CKxAtiXl.js";import"./Container-BLdifuCd.js";import"./TextField-C9k3Krci.js";import"./isMuiElement-D6y26tg6.js";import"./Menu-v_V5_JOT.js";import"./Toolbar-Dix1PW1-.js";import"./MenuItem-XPjFVzgt.js";import"./Button-DHZJ6Cwx.js";import"./InputAdornment-BTw7Fg-6.js";import"./CircularProgress-B59hGHVX.js";const C=[{field:"id",headerName:"ID",headerClassName:"table-header",width:200},{field:"attachments",headerName:"Attachments",headerClassName:"table-header",width:200,renderCell:r=>{const{attachments:a}=r.row;return(a==null?void 0:a.length)>0?a.map(o=>{const t=o.url,d=l(t);return e.jsx(x,{children:e.jsx("a",{href:t,download:!0,target:"_blank",style:{color:"black"},children:e.jsx(u,{file:d,url:t})})})}):"No Attachments"}},{field:"content",headerName:"Content",headerClassName:"table-header",width:400},{field:"sender",headerName:"Sent By",headerClassName:"table-header",width:200,renderCell:r=>e.jsxs(c,{direction:"row",spacing:"1rem",alignItems:"center",children:[e.jsx(A,{alt:r.row.sender.name,src:r.row.sender.avatar}),e.jsx("span",{children:r.row.sender.name})]})},{field:"chat",headerName:"Chat",headerClassName:"table-header",width:220},{field:"groupChat",headerName:"Group Chat",headerClassName:"table-header",width:100},{field:"createdAt",headerName:"Time",headerClassName:"table-header",width:250}],R=()=>{const{loading:r,data:a,error:o}=f(`${p}/api/v1/admin/messages`,"dashbord-messages");N([{isError:o,error:o}]);const[t,d]=m.useState([]);return m.useEffect(()=>{a&&d(a.transformMessage.map(s=>({...s,id:s._id,sender:{name:s.sender.name,avatar:n(s.sender.avatar,50)},createdAt:i(s.createdAt).format("MMMM Do YYYY, h:mm:ss a")})))},[a]),e.jsx(w,{children:r?e.jsx(h,{width:"100vh"}):e.jsx(g,{heading:"All Messages",rows:t,columns:C,rowHeight:150})})};export{R as default};
